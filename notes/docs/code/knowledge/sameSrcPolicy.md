---
title: 同源策略
icon: file
order: 
date: ""
category:
  - 知识
tags:
---
## 简介
>为了安全性而设置的一种安全策略


## 触发
满足 `协议`、`地址`、`端口` 这三者中 `任意不同` 的时候(`源不同`)，此时会触发浏览器的同源策略

## 作用

- 防止跨站脚本攻击(XSS) 同源策略可以阻止不同源之间的文档对彼此进行读取，这样就可以减少 XSS 攻击的风险。XSS 攻击是指黑客将恶意代码注入到网页中，当其他用户浏览该网页时就会执行恶意代码，从而导致信息泄露等严重后果。
	- 例如：用户在 A 网站正常阅读浏览，但是发现评论区有人恶意的在评论区中注入了恶意代码，用户每次加载到评论区就会加载触发这段恶意代码，这段代码可能会窃取用户在 A 网站的登录信息，并且发送到一个非同源的网站进行保存。致使大量用户的登录信息泄漏。开启同源策略可以在 A 网站上防止请求这个非同源的网站，从而防止信息被保存。

- 防止跨站请求伪造(CSRF)  同源策略要求指定的任何跨源 HTTP 请求必须首先获得用户的许可，从而阻止了 CSRF 攻击。CSRF 攻击是指攻击者诱使用户执行了一个他们没有意识到的操作，比如修改密码或者转账等高风险操作。
	- 例如：例如：用户在 A 网站正常阅读浏览，但是发现评论区有人发了个链接，于是点击跳转到 B，就可能在 B 网站中执行一些恶意脚本，在 B 网站的恶意脚本中可能会直接在浏览器中使用 A 网站已经登录的身份，发送构造好的特定请求，从而实现恶意转账、修改 A 的资料信息等操作。开启同源策略之后，则要求跨源请求必须获得用户许可，有效阻止了这种"偷跑"的请求，在一定程度上防范了 CSRF 攻击。

## 解决
 > 跨源请求的本质是请求别人的信息，所以能否跨域请求，是由被请求的服务器的设置决定的。
 
### 配置配置类
```Java
@configuration
public class CrosConfig implements WebMvcConfigurer {
@override
public void addCorsMappings(CorsRegistry registry) {
registry.addMapping("/**"）//**匹配的是我们所有后台的路径，代表后台共享了什么资源
.allowedorigins（"http://localhost:8082"）//匹配的前台的服务器地址
.maxAge(300 * 1000)
.allowedHeaders("*")
.allowedMethods("*")；//允许的前台的请求方式
```
### CrossOrigin 注解
##### 作用：
在 controller 上添加@CrossOrigin 注解用来开启跨域请求，让其他域的请求可以访问该 controller。
##### 详解：

origin属性：允许可访问的域列表

maxAge：准备响应前的缓存持续的最大时间（以秒为单位）
#### 使用位置
- 类
- 方法

参考：[springboot之跨域访问cros，@CrossOrigin注解](https://blog.csdn.net/YMYYZ/article/details/128608870)

